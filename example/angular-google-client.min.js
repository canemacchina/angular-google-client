!function(){"use strict";angular.module("cm-google-api",[])}(),function(){"use strict";angular.module("cm-google-api").provider("googleClient",function(){var e,n,t,i=[],o=0,r=[],c=[],a=!1,u=!1,l=!1,s=!1,f=!1,d=function(n){0===--o&&(u=!0,l=!1,a?gapi.auth.authorize({client_id:e,scope:i,immediate:!0},function(){n.resolve()}):n.resolve())};this.addApi=function(e,n,t){var i={};return i.api=e,i.version=n,o++,"undefined"==typeof t?r.push(i):(i.baseUrl=t,c.push(i)),this},this.setAutomaticAuth=function(){return a=!0,this.addScope("https://www.googleapis.com/auth/userinfo.email"),this},this.addScope=function(e){return i+=" "+e,this},this.setClientId=function(n){return e=n,this},this.$get=["$q","$window","$document",function(o,a,p){return{afterClientLoaded:function(){if(!s&&!f){f=!0,t=o.defer(),a._cmGoogleClientInitCallback=function(){s=!0,f=!1,t.resolve()};var e=p[0].createElement("script");e.onerror=function(e){t.reject(e)},e.src="https://apis.google.com/js/client.js?onload=_cmGoogleClientInitCallback",p[0].body.appendChild(e)}return t.promise},afterApiLoaded:function(){return u||l||(n=o.defer(),l=!0,this.afterClientLoaded().then(function(){angular.forEach(c,function(e){gapi.client.load(e.api,e.version,function(){d(n)},e.baseUrl)}),angular.forEach(r,function(e){gapi.client.load(e.api,e.version,function(){d(n)})})},function(e){n.reject(e)})),n.promise},clientId:e,scopes:i}}]})}(),function(){"use strict";angular.module("cm-google-api").service("googleClientService",["$q","googleClient",function(e,n){this.execute=function(t,i){var o=e.defer();return n.afterApiLoaded().then(function(){t=t.split(".");var e=gapi.client;angular.forEach(t,function(n){e=e[n]},e);var n;n="undefined"==typeof i?e():e(i),n.then(function(e){o.resolve(e)},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise}}])}();
//# sourceMappingURL=angular-google-client.min.js.map