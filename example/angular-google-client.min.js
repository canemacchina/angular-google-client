!function(){"use strict";angular.module("cm-google-api",[])}(),function(){"use strict";angular.module("cm-google-api").provider("googleClient",function(){var e,t,i,n=[],o=0,a=[],r=[],u=!1,c=!1,s=!1,l=!1,d=!1,f=function(t){0===--o&&(c=!0,s=!1,u?gapi.auth.authorize({client_id:e,scope:n,immediate:!0},function(){t.resolve()}):t.resolve())};this.addApi=function(e,t,i){var n={};return n.api=e,n.version=t,o++,"undefined"==typeof i?a.push(n):(n.baseUrl=i,r.push(n)),this},this.setAutomaticAuth=function(){return u=!0,this.addScope("https://www.googleapis.com/auth/userinfo.email"),this},this.addScope=function(e){return n+=" "+e,this},this.setClientId=function(t){return e=t,this},this.$get=["$q","$window",function(o,u){return{afterClientLoaded:function(){if(!l&&!d){d=!0,i=o.defer();var e=(new Date).getTime(),t="_gapiServiceInitCallback"+e;u[t]=function(){l=!0,d=!1,i.resolve()};var n=document.createElement("script");n.src="https://apis.google.com/js/client.js?onload="+t,document.body.appendChild(n)}return i.promise},afterApiLoaded:function(){return c||s||(t=o.defer(),this.afterClientLoaded().then(function(){s=!0,angular.forEach(r,function(e){gapi.client.load(e.api,e.version,function(){f(t)},e.baseUrl)}),angular.forEach(a,function(e){gapi.client.load(e.api,e.version,function(){f(t)})})})),t.promise},clientId:e,scopes:n}}]})}();
//# sourceMappingURL=angular-google-client.min.js.map