!function(){"use strict";angular.module("cm-google-api",[])}(),function(){"use strict";angular.module("cm-google-api").provider("googleClient",function(){var t,e,i,n=[],o=0,a=[],r=[],c=!1,u=!1,s=!1,l=!1,d=!1,f=function(e){0===--o&&(u=!0,s=!1,c?gapi.auth.authorize({client_id:t,scope:n,immediate:!0},function(){e.resolve()}):e.resolve())};this.addApi=function(t,e,i){var n={};return n.api=t,n.version=e,o++,"undefined"==typeof i?a.push(n):(n.baseUrl=i,r.push(n)),this},this.setAutomaticAuth=function(){return c=!0,this.addScope("https://www.googleapis.com/auth/userinfo.email"),this},this.addScope=function(t){return n+=" "+t,this},this.setClientId=function(e){return t=e,this},this.$get=["$q","$window",function(o,c){return{afterClientLoaded:function(){if(!l&&!d){d=!0,i=o.defer(),c._cmGoogleClientInitCallback=function(){l=!0,d=!1,i.resolve()};var t=document.createElement("script");t.src="https://apis.google.com/js/client.js?onload=_cmGoogleClientInitCallback",document.body.appendChild(t)}return i.promise},afterApiLoaded:function(){return u||s||(e=o.defer(),this.afterClientLoaded().then(function(){s=!0,angular.forEach(r,function(t){gapi.client.load(t.api,t.version,function(){f(e)},t.baseUrl)}),angular.forEach(a,function(t){gapi.client.load(t.api,t.version,function(){f(e)})})})),e.promise},clientId:t,scopes:n}}]})}();
//# sourceMappingURL=angular-google-client.min.js.map